# 선분 교차 2 - 17387 

[문제 링크](https://www.acmicpc.net/problem/17387) 

### 성능 요약

메모리: 14264 KB, 시간: 108 ms

### 분류

많은 조건 분기, 기하학, 선분 교차 판정

### 제출 일자

2025년 2월 28일 19:59:58

### 문제 설명

<p>2차원 좌표 평면 위의 두 선분 L<sub>1</sub>, L<sub>2</sub>가 주어졌을 때, 두 선분이 교차하는지 아닌지 구해보자. 한 선분의 끝 점이 다른 선분이나 끝 점 위에 있는 것도 교차하는 것이다.</p>

<p>L<sub>1</sub>의 양 끝 점은 (x<sub>1</sub>, y<sub>1</sub>), (x<sub>2</sub>, y<sub>2</sub>), L<sub>2</sub>의 양 끝 점은 (x<sub>3</sub>, y<sub>3</sub>), (x<sub>4</sub>, y<sub>4</sub>)이다.</p>

### 입력 

 <p>첫째 줄에 L<sub>1</sub>의 양 끝 점 x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub>가, 둘째 줄에 L<sub>2</sub>의 양 끝 점 x<sub>3</sub>, y<sub>3</sub>, x<sub>4</sub>, y<sub>4</sub>가 주어진다.</p>

### 출력 

 <p>L<sub>1</sub>과 L<sub>2</sub>가 교차하면 1, 아니면 0을 출력한다.</p>

### 느낀점

- 애써 피해왔던 CCW 알고리즘,, 드디어 입문했다.
- 벡터가 뭔지, 외적이 뭔지도 몰라 가망이 없다고 생각했는데, 마주해봤다.
- 개념부터 잘 설명해주신 분이 계셔서 대략적인 개념들과 문제 풀이를 위한 공식의 원리 정도라도 이해해보고자 했다.

### 설계 : 60분 (공부시간까지)

- CCW(Counter ClockWise): 평면 위에 놓인 세 점의 방향관계를 알 수 있도록 하는 알고리즘
- (기하학에서의) 벡터: 크기와 방향을 가진 양을 나타내는 개념, 화살표로 나타내면 화살표의 길이가 크기, 화살표의 머리 방향이 방향이다.
    - 세 점 a, b, c 가 있을 때, `a → b` 인 벡터를 A, `a → c` 인 벡터를 B라고 해본다.
    - 벡터의 곱을 외적이라고 하는데, AXB 의 결과에 따라 A벡터를 기준으로 B벡터가 어느 방향에 있는지 판단할 수 있다.
        
        ![Image](https://github.com/user-attachments/assets/db0e55a0-14b8-4cac-b101-4c41f6500df0)
        
    - 0보다 크면 시계 방향, 0보다 작으면 반시계 방향, 0이면 평행이다.
- 벡터의 외적을 활용하면 두 선분을 이루는 4개의 점을 사용해 선분 교차 여부를 판단할 수 있다.
    - 단, 두 점의 대소를 판단하는 기준이 일정하고, 그에 따른 A,B 벡터 순서가 일관성있어야 한다.
    - 나는 두 점에서 x의 값이 우선, x가 같다면 y값을 기준으로 대소비교를 했다. (왼쪽에 있을수록, 위쪽에 있을수록 작다)
    
        ![Image](https://github.com/user-attachments/assets/41d84f3b-1fb7-4d8c-b65e-4e70566647fc)
    
    - 두 선이 교차하는 경우 한 선분의 점에서 다른 선분의 각 점으로 향하는 벡터의 곱이 서로 다른 것을 알 수 있다. (한 선분의 점은 두 점에 대해 모두 확인해야 한다.)
    - 만약 두 선분이 완전히 평행한 경우에는 4번의 외적 값이 모두 0일텐데, 이것은 위 조건에 부합하지 않는 예외 경우이다. 이 경우에는 각 점의 대소비교를 통해 판단한다.
        - 한 선분의 큰 점이 다른 선분의 작은 점보다 작아야 한다. (두 선분에 대해 모두 확인한다.)